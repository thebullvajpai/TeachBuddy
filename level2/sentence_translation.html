<!DOCTYPE html>
<html>
<head>
<title>Sentence Translation Practice</title>

<style>
body{
    font-family: Arial;
    background:#eef2f7;
    text-align:center;
}

.container{
    background:white;
    width:650px;
    margin:80px auto;
    padding:30px;
    border-radius:10px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}

input{
    width:80%;
    padding:10px;
    margin-top:15px;
}

button{
    padding:10px 20px;
    margin-top:15px;
    cursor:pointer;
}

#result{
    margin-top:20px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="container">
<h2>Sentence Translation</h2>

<p id="question"></p>

<input type="text" id="userAnswer" placeholder="Type your translation here">

<br>
<button onclick="checkAnswer()">Check</button>
<button onclick="nextQuestion()">Next</button>

<p id="result"></p>
</div>

<script>
let questions=[];
let currentIndex=0;

fetch('data/sentence_translation.json')
.then(res=>{
    if(!res.ok) throw new Error("Failed to load JSON");
    return res.json();
})
.then(data=>{
    questions=data.questions;
    loadQuestion();
})
.catch(err=>{
    document.getElementById("result").innerText="Error loading questions.";
    console.error(err);
});

function loadQuestion(){
    document.getElementById("question").innerText =
        questions[currentIndex].question;

    document.getElementById("userAnswer").value="";
    document.getElementById("result").innerText="";
}

function normalize(text){
    return text.trim().toLowerCase().replace(/[.]/g,"");
}

function checkAnswer(){
    const user = normalize(
        document.getElementById("userAnswer").value
    );

    const correct = normalize(
        questions[currentIndex].answer
    );

    if(user === correct){
        document.getElementById("result").innerText="Correct!";
    }else{
        document.getElementById("result").innerText=
            "Wrong! Correct answer: " +
            questions[currentIndex].answer;
    }
}

function nextQuestion(){
    currentIndex++;
    if(currentIndex >= questions.length){
        currentIndex=0;
    }
    loadQuestion();
}
</script>

</body>
</html>
