<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sentence Translation Practice</title>
    <link rel="stylesheet" href="../css/output.css">
</head>

<body class="tb-shell">

    <div class="tb-container">
        <div class="mx-auto max-w-2xl">
            <header class="tb-header">
                <div class="flex items-center justify-between gap-4">
                    <div>
                        <div class="tb-badge">Level 2 · Translation</div>
                        <h1 class="tb-title">Sentence translation</h1>
                        <p class="tb-subtitle">Translate the sentence into natural English.</p>
                    </div>
                    <button class="tb-btn-secondary" onclick="window.location.href='level2_dashboard.html'">← Back</button>
                </div>
            </header>

            <div class="tb-card">
                <p id="question" class="text-base font-semibold text-slate-900"></p>

                <div class="mt-4">
                    <input class="tb-input" type="text" id="userAnswer" placeholder="Type your translation here">
                </div>

                <div class="mt-5 flex flex-col gap-3 sm:flex-row">
                    <button class="tb-btn w-full" onclick="checkAnswer()">Check</button>
                    <button class="tb-btn-secondary w-full" onclick="nextQuestion()">Next</button>
                </div>

                <p id="result" class="mt-4 text-sm font-semibold text-slate-700"></p>
            </div>
        </div>
    </div>

<script>
let questions=[];
let currentIndex=0;

fetch('data/sentence_translation.json')
.then(res=>{
    if(!res.ok) throw new Error("Failed to load JSON");
    return res.json();
})
.then(data=>{
    questions=data.questions;
    loadQuestion();
})
.catch(err=>{
    document.getElementById("result").innerText="Error loading questions.";
    console.error(err);
});

function loadQuestion(){
    document.getElementById("question").innerText =
        questions[currentIndex].question;

    document.getElementById("userAnswer").value="";
    document.getElementById("result").innerText="";
}

function normalize(text){
    return text.trim().toLowerCase().replace(/[.]/g,"");
}

function checkAnswer(){
    const user = normalize(
        document.getElementById("userAnswer").value
    );

    const correct = normalize(
        questions[currentIndex].answer
    );

    if(user === correct){
        document.getElementById("result").innerText="Correct!";
    }else{
        document.getElementById("result").innerText=
            "Wrong! Correct answer: " +
            questions[currentIndex].answer;
    }
}

function nextQuestion(){
    currentIndex++;
    if(currentIndex >= questions.length){
        currentIndex=0;
    }
    loadQuestion();
}
</script>

</body>
</html>
