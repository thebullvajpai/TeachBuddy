<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Error Correction Practice</title>
    <link rel="stylesheet" href="../css/output.css">
</head>

<body class="tb-shell">

    <div class="tb-container">
        <div class="mx-auto max-w-2xl">
            <header class="tb-header">
                <div class="flex items-center justify-between gap-4">
                    <div>
                        <div class="tb-badge">Level 2 · Error correction</div>
                        <h1 class="tb-title">Correct the sentence</h1>
                        <p class="tb-subtitle">Don’t forget punctuation.</p>
                    </div>
                    <button class="tb-btn-secondary" onclick="window.location.href='level2_dashboard.html'">← Back</button>
                </div>
            </header>

            <div class="tb-card">
                <p id="sentence" class="text-base font-semibold text-slate-900"></p>

                <div class="mt-4">
                    <input class="tb-input" type="text" id="userAnswer" placeholder="Type corrected sentence">
                </div>

                <div class="mt-5 flex flex-col gap-3 sm:flex-row">
                    <button class="tb-btn w-full" onclick="checkAnswer()">Check</button>
                    <button class="tb-btn-secondary w-full" onclick="nextQuestion()">Next</button>
                </div>

                <p id="result" class="mt-4 text-sm font-semibold text-slate-700"></p>
            </div>
        </div>
    </div>

<script>
let questions=[];
let currentIndex=0;

fetch('data/error_correction.json')
.then(res=>res.json())
.then(data=>{
    questions=data.questions;
    loadQuestion();
});

function loadQuestion(){
    document.getElementById("sentence").innerText =
        questions[currentIndex].sentence;

    document.getElementById("userAnswer").value="";
    document.getElementById("result").innerText="";
}

function checkAnswer(){
    const user =
        document.getElementById("userAnswer").value.trim().toLowerCase();

    const correct =
        questions[currentIndex].correct.trim().toLowerCase();

    if(user === correct){
        document.getElementById("result").innerText="Correct!";
    }else{
        document.getElementById("result").innerText=
            "Wrong! Correct: " + questions[currentIndex].correct;
    }
}

function nextQuestion(){
    currentIndex++;
    if(currentIndex >= questions.length){
        currentIndex=0;
    }
    loadQuestion();
}
</script>

</body>
</html>
